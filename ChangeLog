------------------------------------------------------------------------
r79 | rakaur | 2008-10-07 23:37:27 -0400 (Tue, 07 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/iq_get.rb

Implement XEP-0092, software version. Closes #23.

------------------------------------------------------------------------
r78 | rakaur | 2008-10-07 20:44:50 -0400 (Tue, 07 Oct 2008) | 5 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/bin/xmppd
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/listen.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/iq.rb
   M /trunk/lib/xmppd/xmpp/iq_get.rb
   M /trunk/lib/xmppd/xmpp/iq_set.rb
   A /trunk/lib/xmppd/xmpp/message.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/presence.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp/tls.rb
   M /trunk/lib/xmppd/xmpp.rb
   M /trunk/lib/xmppd.rb
   M /trunk/test/ts_xmppd.rb

Big commit.
Add message stuff, including offline messages (XEP-0160) with delay (XEP-0203). Closes #16 and #57.
Fix up IQ stuff a little more.
General cleanups.

------------------------------------------------------------------------
r77 | rakaur | 2008-10-07 14:36:25 -0400 (Tue, 07 Oct 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/doc/object_tree.txt
   M /trunk/lib/xmppd/auth.rb
   M /trunk/lib/xmppd/configure/parser.rb
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/iq.rb
   A /trunk/lib/xmppd/xmpp/iq_get.rb
   A /trunk/lib/xmppd/xmpp/iq_set.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/presence.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/test/tc_db.rb

Resorted the IQ stuff. Still not sure I'm happy with it. See #56.
Fixed a few random things.

------------------------------------------------------------------------
r76 | rakaur | 2008-10-07 10:11:17 -0400 (Tue, 07 Oct 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/doc/object_tree.txt
   D /trunk/lib/xmppd/xmpp/client_iq.rb
   D /trunk/lib/xmppd/xmpp/client_presence.rb
   A /trunk/lib/xmppd/xmpp/iq.rb (from /trunk/lib/xmppd/xmpp/client_iq.rb:75)
   A /trunk/lib/xmppd/xmpp/presence.rb (from /trunk/lib/xmppd/xmpp/client_presence.rb:75)

Just cleaning some stuff up.
IQ and Presence don't need to be under Client. Gotta start refactoring via #56.

------------------------------------------------------------------------
r75 | rakaur | 2008-10-07 10:02:23 -0400 (Tue, 07 Oct 2008) | 1 line
Changed paths:
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/features.rb

Intermediate commit to get svn to shut up.
------------------------------------------------------------------------
r74 | rakaur | 2008-10-07 09:27:30 -0400 (Tue, 07 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/doc/object_tree.txt
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp/tls.rb

Continue the documentation saga.

------------------------------------------------------------------------
r73 | rakaur | 2008-10-06 18:56:36 -0400 (Mon, 06 Oct 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/auth.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/resource.rb

Continuing the documentation saga.
IQ handling is just... ugh... need to rework it, see #56.

------------------------------------------------------------------------
r72 | rakaur | 2008-10-06 15:19:10 -0400 (Mon, 06 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Continue the documentation effort.

------------------------------------------------------------------------
r71 | rakaur | 2008-10-06 10:50:23 -0400 (Mon, 06 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Added rate limiting, closing #51.

------------------------------------------------------------------------
r70 | rakaur | 2008-10-06 07:41:00 -0400 (Mon, 06 Oct 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Rakefile
   M /trunk/etc/example.conf
   A /trunk/lib/xmppd/base64.rb
   M /trunk/lib/xmppd/configure/auth.rb
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/timer.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

Fixed timeouts, closing #48.
Make some fixes for ruby19. Won't run yet because IDN doesn't work.

------------------------------------------------------------------------
r69 | rakaur | 2008-10-05 10:54:41 -0400 (Sun, 05 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

This commit doesn't work. Trying to stamp out a bug.

------------------------------------------------------------------------
r68 | rakaur | 2008-10-05 00:36:23 -0400 (Sun, 05 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

Changed the resource binding to not modify a client's provided resource.

------------------------------------------------------------------------
r67 | rakaur | 2008-10-04 19:45:01 -0400 (Sat, 04 Oct 2008) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Move some stuff from Stream#close to ClientStream#close where it should have been.
Fix some typos in resource.rb.
Document the hell out of stream.rb.

------------------------------------------------------------------------
r66 | rakaur | 2008-10-04 14:51:23 -0400 (Sat, 04 Oct 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Got rid of the useless Stanza classes. Just pass the REXML::Elements now. Closes #53.
Also, documented the hell out of resource.rb. Going to keep on doing this. Part of #31.

------------------------------------------------------------------------
r65 | rakaur | 2008-10-03 13:33:37 -0400 (Fri, 03 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/tls.rb

Fixed the certfile stuff so it only asks for the password once.

------------------------------------------------------------------------
r64 | rakaur | 2008-10-02 18:28:28 -0400 (Thu, 02 Oct 2008) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

Fixed some bugs with available resources. A resource may now become available after being unavailable and everything works right.
Finished directed presence, which finishes off presence, closing #41.
Imposed a stanza limit of 65536. There is currently no standard for handling this, see #50.

------------------------------------------------------------------------
r63 | rakaur | 2008-10-02 12:25:42 -0400 (Thu, 02 Oct 2008) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp/tls.rb
   M /trunk/lib/xmppd.rb

Fixed up the parser to kind of work.
Cleaned up the REXML creation stuff.
Added a limit on the buffer waiting to be parsed.

------------------------------------------------------------------------
r62 | rakaur | 2008-10-01 10:08:21 -0400 (Wed, 01 Oct 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README
   M /trunk/Rakefile
   M /trunk/bin/xmppd
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/auth.rb
   M /trunk/lib/xmppd/configure/auth.rb
   M /trunk/lib/xmppd/configure/configuration.rb
   M /trunk/lib/xmppd/configure/deny.rb
   M /trunk/lib/xmppd/configure/listen.rb
   M /trunk/lib/xmppd/configure/logging.rb
   M /trunk/lib/xmppd/configure/operator.rb
   M /trunk/lib/xmppd/configure/parser.rb
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/listen.rb
   M /trunk/lib/xmppd/log.rb
   M /trunk/lib/xmppd/timer.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd/version.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp/tls.rb
   M /trunk/lib/xmppd/xmpp.rb
   M /trunk/lib/xmppd.rb
   M /trunk/test/tc_config.rb
   M /trunk/test/tc_db.rb
   M /trunk/test/tc_logging.rb
   M /trunk/test/tc_stream.rb
   M /trunk/test/tc_timer.rb
   M /trunk/test/ts_xmppd.rb

Named 'synapse.' Fitting, I think.

------------------------------------------------------------------------
r61 | rakaur | 2008-09-30 17:25:19 -0400 (Tue, 30 Sep 2008) | 1 line
Changed paths:
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Clean up some stuff.
------------------------------------------------------------------------
r60 | rakaur | 2008-09-30 17:05:47 -0400 (Tue, 30 Sep 2008) | 1 line
Changed paths:
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb

Fixing svn:keywords.
------------------------------------------------------------------------
r59 | rakaur | 2008-09-30 16:58:41 -0400 (Tue, 30 Sep 2008) | 6 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   A /trunk/lib/xmppd/xmpp/parser.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

Gotta make sure to commit while I remember. Big commit.
Cleaned up stanza classes.
Made resource stuff more sane.
The XML is now parsed by a SAX parser, and can handle partial stanzas. This took me days.
More later, after I clean this up.

------------------------------------------------------------------------
r58 | rakaur | 2008-09-29 14:29:26 -0400 (Mon, 29 Sep 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   A /trunk/lib/xmppd/xmpp/stanza.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

Cleaned up stanza classes. See #43.
Still need to work on storing the actual XML. Things are messing up for some reason and my brain hurts.

------------------------------------------------------------------------
r57 | rakaur | 2008-09-29 10:03:35 -0400 (Mon, 29 Sep 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/stream.rb

See comment in stream.rb on #45.

------------------------------------------------------------------------
r56 | rakaur | 2008-09-26 16:07:39 -0400 (Fri, 26 Sep 2008) | 6 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp/tls.rb
   M /trunk/lib/xmppd.rb

Still gotta get private keys/passphases working right.
Did a bunch of clean ups. Now stuff doesn't have to edit other stuff's states. This is good.
Finally got parsing to work with Psi. REXML sucks, and my UNGODLY hacky work-around is to wrap everything in a <xmppd/> element.
Hopefully move away from REXML in the future. Maybe hpricot or xml-simple.
More cleanups.

------------------------------------------------------------------------
r55 | rakaur | 2008-09-23 14:26:28 -0400 (Tue, 23 Sep 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Huge commit. Presence now broadcasts, at least locally. I think all of it finally works.
Need to write some new unit tests... XXX

------------------------------------------------------------------------
r54 | rakaur | 2008-09-22 16:47:48 -0400 (Mon, 22 Sep 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/doc/extensions
   A /trunk/doc/extensions/xep-0186.html
   A /trunk/doc/extensions/xmpp.css
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/client_presence.rb

Add some more docs, and remove useless sending of XML.

------------------------------------------------------------------------
r53 | rakaur | 2008-09-22 14:27:29 -0400 (Mon, 22 Sep 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_iq.rb

Carrying over shrike's CLIENTINFO legacy... :)

------------------------------------------------------------------------
r52 | rakaur | 2008-09-19 17:02:16 -0400 (Fri, 19 Sep 2008) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Rakefile
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   A /trunk/lib/xmppd/xmpp/client_presence.rb
   M /trunk/lib/xmppd/xmpp/resource.rb

Added lots of useful stuff to Resource.
Added the beginnings of <presence/> processing.
Still buggy, haven't done any kind of broadcasting stuff yet.

------------------------------------------------------------------------
r51 | rakaur | 2008-09-18 16:14:15 -0400 (Thu, 18 Sep 2008) | 1 line
Changed paths:
   A /trunk/doc
   A /trunk/doc/drafts
   A /trunk/doc/drafts/draft-saintandre-rfc3920bis-07.html
   A /trunk/doc/drafts/draft-saintandre-rfc3920bis-07.txt
   A /trunk/doc/drafts/draft-saintandre-rfc3921bis-06.html
   A /trunk/doc/drafts/draft-saintandre-rfc3921bis-06.txt
   A /trunk/doc/rfcs
   A /trunk/doc/rfcs/rfc3920.html
   A /trunk/doc/rfcs/rfc3920.txt
   A /trunk/doc/rfcs/rfc3921.html
   A /trunk/doc/rfcs/rfc3921.txt

Adding some reference docs.
------------------------------------------------------------------------
r50 | rakaur | 2008-09-18 16:09:56 -0400 (Thu, 18 Sep 2008) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/configure/parser.rb
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/listen.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd/version.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   D /trunk/lib/xmppd/xmpp/session.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb
   M /trunk/test/tc_db.rb
   M /trunk/test/tc_stream.rb
   M /trunk/test/tc_timer.rb

Removed sessions. The handlers are basic noops for backwards-compatibility.
Resources no longer have states (re: lack of sessions).
Cleaned lots of stuff up. Still lots of work to do.

------------------------------------------------------------------------
r49 | rakaur | 2008-09-18 13:12:56 -0400 (Thu, 18 Sep 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/features.rb

Made resource binding required.
Fixed DIGEST-MD5 parsing. It's ugly, but necessary, thanks to stupid clients being stupid and the spec being retarded.

------------------------------------------------------------------------
r48 | rakaur | 2008-09-17 17:27:31 -0400 (Wed, 17 Sep 2008) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Apparently I should have read the PLAIN spec. Works with other clients now.
Psi is crappy. It breaks XML rules and so far fails to work with my implementation of DIGEST-MD5. Gajim and Digsby work fine. Also, it doesn't follow the RFC with SASL PLAIN's success return. Bummer.

------------------------------------------------------------------------
r47 | rakaur | 2008-09-17 15:29:07 -0400 (Wed, 17 Sep 2008) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/tls.rb

Added some RFC-required stuff to current code.
Implemented SASL [PLAIN] rather hackily. Haven't read the spec, just guessed.
I'm now referencing the new "draft" of the RFC for all of this.

------------------------------------------------------------------------
r46 | rakaur | 2008-09-15 16:12:12 -0400 (Mon, 15 Sep 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd.rb

Does forking now.

------------------------------------------------------------------------
r45 | rakaur | 2008-09-11 08:28:17 -0400 (Thu, 11 Sep 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp/tls.rb

Fixed some stuff to work with the new REXML kinks. Back where we were, at least.

------------------------------------------------------------------------
r44 | rakaur | 2008-09-10 13:05:14 -0400 (Wed, 10 Sep 2008) | 1 line
Changed paths:
   M /trunk/lib/xmppd/xmpp/stream.rb

Commented out the io/nonblock stuff for now. It doesn't work on windows, and I don't think we need it. I handle blocking myself.
------------------------------------------------------------------------
r43 | rakaur | 2006-02-24 13:09:31 -0500 (Fri, 24 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb

Add iq stanza errors, closing #39.

------------------------------------------------------------------------
r42 | rakaur | 2006-02-24 00:40:55 -0500 (Fri, 24 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/resource.rb

Add a bunch of database stuff for rosters.
Still a lot of work left on rosters...

------------------------------------------------------------------------
r41 | rakaur | 2006-02-23 10:56:26 -0500 (Thu, 23 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/resource.rb
   A /trunk/lib/xmppd/xmpp/session.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Add support for sessions, closing #38.
Fix Stream.genid.

------------------------------------------------------------------------
r40 | rakaur | 2006-02-20 12:43:42 -0500 (Mon, 20 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client_iq.rb
   A /trunk/lib/xmppd/xmpp/resource.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Add resource handling. Must go to work now...

------------------------------------------------------------------------
r39 | rakaur | 2006-02-19 12:41:15 -0500 (Sun, 19 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   A /trunk/lib/xmppd/xmpp/client_iq.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Added 'support' for resource binding. Still have a lot to fix up on this but I'm pretty busy until Tuesday.
Added basic iq stanza handling.

------------------------------------------------------------------------
r38 | rakaur | 2006-02-17 14:22:45 -0500 (Fri, 17 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb

Add some YAML stuff.

------------------------------------------------------------------------
r37 | rakaur | 2006-02-17 13:39:20 -0500 (Fri, 17 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   D /trunk/var/db/users.yaml

This should have never been in the repos.

------------------------------------------------------------------------
r36 | rakaur | 2006-02-17 13:37:53 -0500 (Fri, 17 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/test/tc_db.rb
   M /trunk/test/tc_timer.rb
   M /trunk/var/db/users.yaml

SASL now auths against the DB.
Add authorization stuff.

------------------------------------------------------------------------
r35 | rakaur | 2006-02-16 20:10:00 -0500 (Thu, 16 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/db.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/test/tc_db.rb

Should probably let users have passwords. Stored a la SASL.

------------------------------------------------------------------------
r34 | rakaur | 2006-02-16 19:51:59 -0500 (Thu, 16 Feb 2006) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/lib/xmppd/db.rb
   A /trunk/lib/xmppd/timer.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd.rb
   A /trunk/test/tc_db.rb
   A /trunk/test/tc_timer.rb
   M /trunk/test/ts_xmppd.rb
   A /trunk/var/db
   A /trunk/var/db/users.yaml

Added unit testing for both.
Added clever little timers, closing #36.
Added basic DB stuff using YAML. Closes #9.

------------------------------------------------------------------------
r33 | rakaur | 2006-02-16 13:35:55 -0500 (Thu, 16 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Fix already-established-stream bug.
Fix stream id bug.

------------------------------------------------------------------------
r32 | rakaur | 2006-02-16 13:27:04 -0500 (Thu, 16 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/sasl.rb

Quick fix to SASL.

------------------------------------------------------------------------
r31 | rakaur | 2006-02-16 13:20:22 -0500 (Thu, 16 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   A /trunk/lib/xmppd/xmpp/sasl.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   A /trunk/lib/xmppd/xmpp/tls.rb

Implemented #34.
Cleaned up SASL, closing #3.

------------------------------------------------------------------------
r30 | rakaur | 2006-02-16 00:00:55 -0500 (Thu, 16 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

SASL works. I'm going to clean it up, but I'm commiting it now in case I break something.

------------------------------------------------------------------------
r29 | rakaur | 2006-02-15 00:37:04 -0500 (Wed, 15 Feb 2006) | 6 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/features.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Fixed a problem in XMPP::Stream#resolve.
Rearranged auth/deny in example.conf.
Cleaned up state machine in XMPP::Stream classes.
Added handling for closing stream tag.
Fixed up feature listing.

------------------------------------------------------------------------
r28 | rakaur | 2006-02-14 11:28:53 -0500 (Tue, 14 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd.rb

Updated Ruby version requirements.

------------------------------------------------------------------------
r27 | rakaur | 2006-02-13 22:56:28 -0500 (Mon, 13 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/lib/xmppd/xmpp/features.rb

Forgot to add this file in [26].

------------------------------------------------------------------------
r26 | rakaur | 2006-02-13 22:50:14 -0500 (Mon, 13 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/auth.rb
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/listen.rb
   M /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   D /trunk/lib/xmppd/xmpp/tls.rb
   M /trunk/lib/xmppd.rb

After much, much trouble, client TLS now works, closing #2.
Fixed some minor stuff.

------------------------------------------------------------------------
r25 | rakaur | 2006-02-09 14:09:31 -0500 (Thu, 09 Feb 2006) | 6 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/auth.rb
   M /trunk/lib/xmppd/listen.rb
   A /trunk/lib/xmppd/xmpp/client.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   A /trunk/lib/xmppd/xmpp/tls.rb

Fix the @myhost stuff.
Add handler for initial client stream stanza.
Add xmpp/client.rb mixin for XMPP::ClientStream.
Add XMPP::Stream#error.
Add provisional TLS stuff.

------------------------------------------------------------------------
r24 | rakaur | 2006-02-09 12:19:21 -0500 (Thu, 09 Feb 2006) | 6 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/example.conf
   A /trunk/lib/xmppd/auth.rb
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/listen.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb
   M /trunk/test/tc_stream.rb

Implement authorization checking against auth{} and deny{} configuration closing #32.
Fix a bug with auths and denys in configuration.
Move new connection handling to listen.rb instead of ioloop.
Fix the unit test for streams.
Further devide streams by ServerStreamIn and ServerStreamOut.

------------------------------------------------------------------------
r23 | rakaur | 2006-02-08 23:32:01 -0500 (Wed, 08 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/lib/xmppd/listen.rb
   M /trunk/lib/xmppd/log.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

All socket stuff should be done, closing #6.
Add listening and accepting. Basic functionality seems to be working.

------------------------------------------------------------------------
r22 | rakaur | 2006-02-08 15:55:34 -0500 (Wed, 08 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/stream.rb

Make sure to nameprep hosts for Streams.

------------------------------------------------------------------------
r21 | rakaur | 2006-02-08 13:50:56 -0500 (Wed, 08 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb
   A /trunk/var/log (from /trunk/var/logs:12)
   D /trunk/var/logs
   A /trunk/var/streams/c2s
   A /trunk/var/streams/s2s

Implement stream debugging, closing #29.

------------------------------------------------------------------------
r20 | rakaur | 2006-02-08 13:24:42 -0500 (Wed, 08 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd.rb

Add signal handling, closing #28.

------------------------------------------------------------------------
r19 | rakaur | 2006-02-08 12:45:57 -0500 (Wed, 08 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/example.conf
   M /trunk/lib/xmppd/configure/listen.rb
   M /trunk/lib/xmppd/configure.rb

Add support for specifying a certfile for starttls.

------------------------------------------------------------------------
r18 | rakaur | 2006-02-08 01:54:34 -0500 (Wed, 08 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd.rb

Actually empty the recvq when finished with it.
Fix a spacing error.

------------------------------------------------------------------------
r17 | rakaur | 2006-02-08 01:32:45 -0500 (Wed, 08 Feb 2006) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/lib/xmppd/xmpp.rb
   M /trunk/lib/xmppd.rb
   M /trunk/test/tc_stream.rb

Add xmlns:db to the opening server streams. Apparently ejabberd doesn't even allow connections without it.
XMPP::ClientStream#connect and XMPP::ServerStream#connect were kind of backwards.
Add reading, writing, and parsing to XMPP::Stream.
Add socket handling, so ioloop actually does something.
------------------------------------------------------------------------
r16 | rakaur | 2006-02-07 13:12:54 -0500 (Tue, 07 Feb 2006) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/configure/configuration.rb
   M /trunk/lib/xmppd/xmpp/stream.rb
   M /trunk/test/tc_logging.rb
   A /trunk/test/tc_stream.rb
   M /trunk/test/ts_xmppd.rb

Fix up some bugs in configuration and logging.
Add a test case for streams.
More work on streams.

------------------------------------------------------------------------
r15 | rakaur | 2006-02-07 00:27:29 -0500 (Tue, 07 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/xmpp/stream.rb

Did some more stream stuff. Devided Stream into ServerStream and ClientStream.

------------------------------------------------------------------------
r14 | rakaur | 2006-02-06 22:45:52 -0500 (Mon, 06 Feb 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/lib/xmppd/log.rb
   M /trunk/lib/xmppd/xmpp/stream.rb

Fix logging so that 'enable' actually has meaning.
Add some more socket stuff and XMPP library stuff.

------------------------------------------------------------------------
r13 | rakaur | 2006-02-06 15:40:24 -0500 (Mon, 06 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/lib/xmppd/xmpp
   A /trunk/lib/xmppd/xmpp/stream.rb
   A /trunk/lib/xmppd/xmpp.rb

Did some work on library stuff. Not a whole lot of free time lately.

------------------------------------------------------------------------
r12 | rakaur | 2006-02-02 19:36:01 -0500 (Thu, 02 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   D /trunk/etc/configure.xml
   D /trunk/etc/configure.xsd
   A /trunk/etc/example.conf
   M /trunk/lib/xmppd/configure/auth.rb
   M /trunk/lib/xmppd/configure/configuration.rb
   A /trunk/lib/xmppd/configure/deny.rb
   M /trunk/lib/xmppd/configure/listen.rb
   M /trunk/lib/xmppd/configure/logging.rb
   M /trunk/lib/xmppd/configure/operator.rb
   A /trunk/lib/xmppd/configure/parser.rb
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/log.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd.rb
   D /trunk/test/bad_config.xml
   D /trunk/test/ok_config.xml
   M /trunk/test/tc_config.rb
   A /trunk/var/logs
   A /trunk/var/streams

First attempt at changing config stuff from XML to easier bind-style.

------------------------------------------------------------------------
r11 | rakaur | 2006-01-31 01:36:00 -0500 (Tue, 31 Jan 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README

Forgot a <tt/> in the README.

------------------------------------------------------------------------
r10 | rakaur | 2006-01-31 01:25:36 -0500 (Tue, 31 Jan 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README
   D /trunk/TODO

Update README for new tracker.
Removed TODO, as we have a tracker now.

------------------------------------------------------------------------
r9 | rakaur | 2006-01-27 18:01:07 -0500 (Fri, 27 Jan 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/etc/configure.xml
   M /trunk/etc/configure.xsd
   M /trunk/lib/xmppd/configure/logging.rb
   M /trunk/lib/xmppd/configure.rb
   A /trunk/lib/xmppd/log.rb
   M /trunk/lib/xmppd.rb
   A /trunk/test/tc_logging.rb
   M /trunk/test/ts_xmppd.rb

Implemented logging with Logger.
Added <fork/> and <logging><level/></logging> to the config.

------------------------------------------------------------------------
r8 | rakaur | 2006-01-27 13:20:42 -0500 (Fri, 27 Jan 2006) | 4 lines
Changed paths:
   M /trunk/TODO
   M /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd.rb

Worked on the logging for about three hours, unfortunately both Logger and Log4r are pieces of shit, so I had to remove it all.
Added proper configuration error catching and such.
Updated TODO.

------------------------------------------------------------------------
r7 | rakaur | 2006-01-27 01:47:36 -0500 (Fri, 27 Jan 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Rakefile
   M /trunk/lib/xmppd/configure/auth.rb
   M /trunk/lib/xmppd/configure/configuration.rb
   M /trunk/lib/xmppd/configure/operator.rb
   M /trunk/lib/xmppd/configure.rb
   A /trunk/test/bad_config.xml
   A /trunk/test/ok_config.xml
   A /trunk/test/tc_config.rb
   A /trunk/test/ts_xmppd.rb

Added unit tests.
Finished major work on configure stuff.

------------------------------------------------------------------------
r6 | rakaur | 2006-01-26 23:44:29 -0500 (Thu, 26 Jan 2006) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/etc/configure.xml
   A /trunk/lib/xmppd/configure
   A /trunk/lib/xmppd/configure/auth.rb
   A /trunk/lib/xmppd/configure/configuration.rb
   A /trunk/lib/xmppd/configure/listen.rb
   A /trunk/lib/xmppd/configure/logging.rb
   A /trunk/lib/xmppd/configure/operator.rb
   A /trunk/lib/xmppd/configure.rb
   M /trunk/lib/xmppd/var.rb
   M /trunk/lib/xmppd.rb

Did a significant amount of work on configure.
Edited TODO.
Changed a word in configure.xml.

------------------------------------------------------------------------
r5 | rakaur | 2006-01-26 17:39:47 -0500 (Thu, 26 Jan 2006) | 2 lines
Changed paths:
   A /trunk/TODO

Added a brief TODO list.

------------------------------------------------------------------------
r4 | rakaur | 2006-01-26 17:14:49 -0500 (Thu, 26 Jan 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/README

Set the svn:keywords on README.

------------------------------------------------------------------------
r3 | rakaur | 2006-01-26 17:13:59 -0500 (Thu, 26 Jan 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   A /trunk/README
   M /trunk/Rakefile

Added an early README, in rdoc format.
Touched up the Rakefile.

------------------------------------------------------------------------
r2 | rakaur | 2006-01-26 02:29:49 -0500 (Thu, 26 Jan 2006) | 3 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Rakefile
   A /trunk/etc/configure.xml
   A /trunk/etc/configure.xsd

Did some work on the configuration file format.
Touched up the Rakefile.

------------------------------------------------------------------------
r1 | rakaur | 2006-01-24 12:34:28 -0500 (Tue, 24 Jan 2006) | 2 lines
Changed paths:
   A /branches
   A /tags
   A /trunk
   A /trunk/ChangeLog
   A /trunk/Rakefile
   A /trunk/bin
   A /trunk/bin/xmppd
   A /trunk/etc
   A /trunk/lib
   A /trunk/lib/xmppd
   A /trunk/lib/xmppd/var.rb
   A /trunk/lib/xmppd/version.rb
   A /trunk/lib/xmppd.rb
   A /trunk/test
   A /trunk/var

Initial import.

------------------------------------------------------------------------
